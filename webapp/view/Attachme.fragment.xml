<core:FragmentDefinition
    xmlns="sap.m.upload"
    xmlns:m="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:u="sap.ui.unified"
    xmlns:f="sap.f"
    controllerName="zfsaccountcreation.controller.MainWizard"
>

    <UploadSetwithTable
        id="UploadSetTable"
        sticky="ColumnHeaders,HeaderToolbar"
        width="auto"
        mode="MultiSelect"
        fixedLayout="false"
        inset="true"
        autoPopinMode="true"
        hiddenInPopin="None"
        items="{
            path: '/AttachmentSet',
            parameters: {
                $$ID: '22'
            },
            filters: {
                path: 'ID',
                operator: 'EQ',
                value1: {
                    path: 'StepModel>/SelectedLevel5'
                }
            },
            templateShareable: false
        }"
        maxFileNameLength="60"
        uploadUrl="/sap/opu/odata/sap/ZFS_ACCOUNT_CREATION_SRV/AttachmentSet"
        multiple="true"
        beforeInitiatingItemUpload="onBeforeInitiatingItemUpload"
        beforeUploadStarts="onBeforeUploadStarts"
        selectionChange="onSelectionChange"
        itemRenamed="onDocumentRenamedSuccess"
        uploadCompleted="onUploadCompleted" >
        <!-- ToolBar for UploadSetwithTable -->
        <headerToolbar>
            <m:OverflowToolbar>
                <m:Title
                    text="{/documentTableTitle} ({= ${/items}.length})"
                    level="H2"
                />
                <m:ToolbarSpacer />
                <m:SearchField
                    width="20%"
                    liveChange=".onSearch"
                >
                    <m:layoutData>
                        <m:OverflowToolbarLayoutData
                            priority="NeverOverflow"
                        />
                    </m:layoutData>
                </m:SearchField>
                <m:ToolbarSeparator />
                <ActionsPlaceholder placeholderFor="UploadButtonPlaceholder" />

                <m:Button
                    id="removeDocumentButton"
                    text="Remove"
                    press=".onRemoveButtonFromMenuDocumentHandler"
                    enabled="false"
                >
                   
                </m:Button>
                <m:Button
                    id="downloadSelectedButton"
                    text="Download"
                    enabled="false"
                    press="onDownloadFiles"
                />
              
                
                
                
            </m:OverflowToolbar>
        </headerToolbar>

        <!-- Columns for UploadSetwithTable -->
        <columns>
            <Column id="fileName" importance="High">
                <header>
                    <m:Label text="File Name" />
                </header>
            </Column>
            <Column id="id">
                <header>
                    <m:Label text="ID" />
                </header>
            </Column>
            
            <Column id="actionButton" importance="High" />
        </columns>

        <!-- Items aggregation with template UploadSetwithTableItem definition for each row -->
        <items>
            <UploadSetwithTableItem
                
            >

            <!-- Cells with cell template defining content for each column (cells and columns work with 1:1 mapping) -->
                <cells>
                   
                    <m:Link
                    text="{ID}"

                    press="openPreview"
                    class="sapUiTinyMarginBottom"
                />
                <m:Text text="{Description}" />
                </cells>
            </UploadSetwithTableItem>
        </items>
    </UploadSetwithTable>

       <FileUploader
        id="UploadSetTable"
        name="uploadFiles"
        uploadUrl="/sap/opu/odata/sap/ZFS_ACCOUNT_CREATION_SRV/AttachmentSet"
        width="auto"
        style="MarginTop: 10px"
        buttonText="Upload"
        multiple="true"
        fileType="any"
        change="onFileUploaderChange"
        uploadComplete="onUploadComplete"
    />

    <!-- Table to display uploaded files -->
    <Table id="uploadedFilesTable" mode="MultiSelect" inset="true" items="{
        path: '/AttachmentSet',
        parameters: {
            $$ID: '22'
        },
        filters: {
            path: 'ID',
            operator: 'EQ',
            value1: {
                path: 'StepModel>/SelectedLevel5'
            }
        },
        templateShareable: false
    }">
        <columns>
            <Column>
                <header>
                    <Text text="File Name" />
                </header>
            </Column>
            <Column>
                <header>
                    <Text text="ID" />
                </header>
            </Column>
            <!-- Add more columns as needed -->
        </columns>
        <items>
            <ColumnListItem>
                <cells>
                    <Link text="{ID}" press="openPreview" class="sapUiTinyMarginBottom" />
                    <Text text="{Description}" />
                    <!-- Add more cells as needed -->
                </cells>
            </ColumnListItem>
        </items>
    </Table>
    </core:FragmentDefinition>
